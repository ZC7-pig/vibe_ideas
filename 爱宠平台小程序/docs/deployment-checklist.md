# 地点选择功能部署检查清单

## 🚀 部署前必检项目

### 1. API配置检查

- [ ] **腾讯地图API密钥**
  - 在 `config/map.js` 中配置 `TENCENT_MAP_KEY`
  - 确保密钥有效且有足够配额
  - 验证密钥权限包含：地点搜索、逆地理编码

- [ ] **高德地图API密钥（可选）**
  - 在 `config/map.js` 中配置 `AMAP_KEY`
  - 作为腾讯地图的备用方案

### 2. 微信公众平台配置

- [ ] **服务器域名白名单**
  - 添加 `https://apis.map.qq.com` 到request合法域名
  - 添加 `https://restapi.amap.com` 到request合法域名

- [ ] **位置权限配置**
  - 在 `app.json` 中配置 `scope.userLocation` 权限描述
  - 确保权限描述清晰易懂

### 3. 功能完整性检查

- [ ] **组件文件完整**
  - `components/location-picker/location-picker.js` ✓
  - `components/location-picker/location-picker.wxml` ✓
  - `components/location-picker/location-picker.wxss` ✓
  - `components/location-picker/location-picker.json` ✓

- [ ] **工具类文件**
  - `utils/location.js` ✓
  - `config/map.js` ✓
  - `test/location-test.js` ✓

- [ ] **页面集成**
  - 发布页面已引入location-picker组件
  - 事件处理函数已正确绑定

### 4. 功能测试验证

#### 基础功能测试
- [ ] 获取当前位置功能正常
- [ ] 地图选择功能正常
- [ ] 地点搜索功能正常
- [ ] 手动输入功能正常

#### 权限处理测试
- [ ] 首次使用时权限请求正常
- [ ] 权限拒绝时降级方案正常
- [ ] 权限引导提示清晰

#### 网络异常测试
- [ ] 断网时错误提示友好
- [ ] API异常时备用方案生效
- [ ] 超时处理机制正常

### 5. 用户体验检查

- [ ] **界面友好性**
  - 加载状态提示清晰
  - 错误信息易于理解
  - 操作流程简单直观

- [ ] **性能优化**
  - 搜索防抖机制生效
  - 组件响应速度良好
  - 内存使用合理

### 6. 兼容性测试

- [ ] **设备兼容性**
  - iOS设备测试通过
  - Android设备测试通过
  - 不同屏幕尺寸适配良好

- [ ] **微信版本兼容性**
  - 最新版微信测试通过
  - 较旧版微信降级方案正常

## 🔧 快速验证脚本

在微信开发者工具控制台运行以下代码进行快速验证：

```javascript
// 导入测试模块
import { quickLocationTest } from './test/location-test.js';

// 运行快速测试
quickLocationTest();
```

## 📋 部署后验证

### 1. 真机测试
- [ ] 在真实设备上测试所有功能
- [ ] 验证GPS定位准确性
- [ ] 测试网络切换场景

### 2. 用户反馈监控
- [ ] 设置错误日志收集
- [ ] 监控API调用成功率
- [ ] 收集用户使用反馈

### 3. 性能监控
- [ ] 监控组件加载时间
- [ ] 监控API响应时间
- [ ] 监控内存使用情况

## ⚠️ 常见问题预防

### 配置问题
- 确保API密钥格式正确，无多余空格
- 检查域名白名单配置是否完整
- 验证权限配置语法正确

### 功能问题
- 测试各种网络环境下的表现
- 验证边界情况处理（如空搜索、特殊字符）
- 确保错误提示信息准确

### 用户体验问题
- 优化首次使用的引导流程
- 确保权限拒绝后的备用方案清晰
- 提供足够的操作反馈

## 📞 技术支持

如果在部署过程中遇到问题，请：

1. 查看微信开发者工具控制台错误信息
2. 参考 `docs/location-setup.md` 详细配置说明
3. 运行 `test/location-test.js` 进行诊断
4. 检查网络请求是否成功

---

**部署完成标志：** 所有检查项目都已完成 ✅

**最后更新：** 请在部署完成后更新此日期